<div *ngIf="!isEdition"><img class="bg" src="../../../../../../assets/images/background-test.jpg" /></div>

<div class="offer-sheet">
  <img class="button closeLogo" *ngIf="!isEdition" (click)="onCloseEditionClick()"
    src="../../../../assets/images/cross-light.svg">

  <h1 *ngIf="!isEdition" class="center">Ajouter une offre</h1>
  <h1 *ngIf="isEdition" class="center">Editer une offre</h1>
  <br />

  <h2>Informations générales</h2>

  <div *ngIf="currentUser.username == 'admin'" class="center">
    <mat-form-field class="center">
      <mat-label>Entreprise</mat-label>
      <mat-select [(value)]="offerOnForm.company._id">
        <mat-option *ngFor="let company of companiesList" [value]="company._id">{{company.display}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>


  <div class="center">
    <mat-form-field class="center title">
      <input matInput placeholder="Titre de l'offre" [(ngModel)]="offerOnForm.title">
    </mat-form-field>
  </div>

  <div class="center">
    <mat-form-field class="center">
      <mat-label>Type d'expérience</mat-label>
      <mat-select [(value)]="offerOnForm.type">
        <mat-option *ngFor="let type of offerType" [value]="type">{{type}}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="center">
      <mat-label>Secteur</mat-label>
      <mat-select [(value)]="selectedSectorId">
        <mat-option *ngFor="let sector of sectorList" [value]="sector._id">{{sector.display}}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="center">
      <mat-label>Durée</mat-label>
      <mat-select [(value)]="offerOnForm.duration">
        <mat-option *ngFor="let duration of offerDuration" [value]="duration">{{duration}}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="center">
      <input matInput [matDatepicker]="dp" placeholder="Date de début souhaitée" [formControl]="dateStart">
      <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
      <mat-datepicker #dp startView="multi-year" (yearSelected)="chosenYearHandler($event)"
        (monthSelected)="chosenMonthHandler($event, dp)" panelClass="example-month-picker">
      </mat-datepicker>
    </mat-form-field>
  </div>

  <app-add-pdf></app-add-pdf>

  <h2>Description</h2>
  <ckeditor [editor]="editor" [(ngModel)]="offerOnForm.description"></ckeditor>

  <br />

  <h2>Informations complémentaires</h2>

  <div class="center">
    <mat-form-field class="center">
      <input type="text" placeholder="Pays" aria-label="Number" matInput [(ngModel)]="locationCountry"
        [matAutocomplete]="auto">
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let country of listCountries" [value]="country">
          {{country}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
    <mat-form-field class="center">
      <input matInput placeholder="Ville" [(ngModel)]="locationCity">
    </mat-form-field>

    <mat-form-field class="center">
      <input matInput placeholder="Rémunération" [(ngModel)]="offerOnForm.remuneration">
      <span matSuffix>€ &nbsp;</span>
    </mat-form-field>
  </div>

  <div class="center ligne">
    <mat-form-field>
      <mat-label>Domaines</mat-label>
      <mat-select [(value)]="selectedDomainsIdList" [multiple]='true'>
        <mat-option *ngFor="let domain of domainsList" [value]="domain._id">{{domain.display}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <br />

  <h3 class="button btn-success" (click)="addOrEditOffer()">{{isEdition ? 'Modifier' : 'Ajouter'}}</h3>
</div>
